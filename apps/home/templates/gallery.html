{% extends 'navbar.html' %}

{% load bootstrap5 %} <!-- Load the bootstrap5 template tag library -->
{% bootstrap_css %} <!-- Load the Bootstrap CSS img folder -->
{% bootstrap_javascript %} <!-- Load the Bootstrap JavaScript img folder -->
{% bootstrap_messages %} <!--Optional: Display django.contrib.messages as Bootstrap alerts -->
{% load static %} <!--Load files stored in static folder in app folder-->

<head>
  <!-- Link to your custom CSS file -->
  <link rel="stylesheet" href="{% static 'css/custom.css' %}"> 
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  
</head>

{% block content %}


<div class="container"> <!-- Align with the navbar's container -->
  <div class="slider-container">
    <div id="image-comparison-slider">
      <img src="{% static 'imgs/BeforeAfterFordBW.jpg' %}" alt="before">
      <div class="img-wrapper">
        <img src="{% static 'imgs/BeforeAfterFordColor.jpg' %}" alt="after">
      </div>
      <span class="label label-before">Before</span>
      <span class="label label-after">After</span>
      <div class="handle">
        <div class="handle-line"></div>
        <div class="handle-circle">
          <i class="fas fa-chevron-left"></i>
          <i class="fas fa-chevron-right"></i>
        </div>
        <div class="handle-line"></div>
      </div>
    </div>
  </div>
</div>

<script>
/**JS**/
const slider = document.querySelector("#image-comparison-slider");
const sliderImgWrapper = document.querySelector("#image-comparison-slider .img-wrapper");
const sliderHandle = document.querySelector("#image-comparison-slider .handle");

slider.addEventListener("mousemove", sliderMouseMove);
slider.addEventListener("touchmove", sliderMouseMove);

function sliderMouseMove(event) {

if(isSliderLocked) return;

const sliderLeftX = slider.offsetLeft;
const sliderWidth = slider.clientWidth;
const sliderHandleWidth = sliderHandle.clientWidth;

let mouseX = (event.clientX || event.touches[0].clientX) - sliderLeftX;
if(mouseX < 0) mouseX = 0;
else if(mouseX > sliderWidth) mouseX = sliderWidth;

sliderImgWrapper.style.width = `${((1 - mouseX/sliderWidth) * 100).toFixed(4)}%`;
sliderHandle.style.left = `calc(${((mouseX/sliderWidth) * 100).toFixed(4)}% - ${sliderHandleWidth/2}px)`;
}

let isSliderLocked = false;

slider.addEventListener("mousedown", sliderMouseDown);
slider.addEventListener("touchstart", sliderMouseDown);
slider.addEventListener("mouseup", sliderMouseUp);
slider.addEventListener("touchend", sliderMouseUp);
slider.addEventListener("mouseleave", sliderMouseLeave);

function sliderMouseDown(event) {
if(isSliderLocked) isSliderLocked = false;
sliderMouseMove(event);
}

function sliderMouseUp() {
if(!isSliderLocked) isSliderLocked = true;
}

function sliderMouseLeave() {
if(isSliderLocked) isSliderLocked = false;
}
</script>


<div class="container">
  <h1 class="text-center mt-5">Gallery</h1>
  <div class="container" style="width: 100%; max-width:1200px; margin: 0 auto; padding-bottom: 20px;">
  <h1 class="text-center mt-5" style="text-align: center; margin-top: 30px;">Gallery</h1>
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <p class="lead text-center" style="text-align: center;font-size:1.25rem;">More Transformations</p>
      <!--Carousel Container-->
      <div id="galleryCarousel" class="carousel slide mt-4" data-bs-ride="carousel"
        style="width: 100%; margin: 0 auto; position: relative;margin-bottom: 20px;">
        <!-- Carousel items -->
         <div class="carousel-inner" style="border-radius: 15px; overflow:hidden; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);">
          <div class="carousel-item active" style="width: 100%;">
            <img src="{% static 'imgs/home-tran-bmw.png' %}" class="d-block w-100" alt="Image of a car"
            style="width: 100%; height: 400px; object-fit: cover; transition: transform 0.5s ease;">
          </div>
          <div class="carousel-item" style="width: 100%;">
            <img src="{% static 'imgs/home-tran-ford.png' %}" class="d-block w-100" alt="Image of a car"
            style="width: 100%; height: 400px; object-fit: cover; transition: transform 0.5s ease;">
          </div>
          <div class="carousel-item">
            <img src="{% static 'imgs/home-tran-gmc.png' %}" class="d-block w-100" alt="Image of a car"
            style="width: 100%; height: 400px; object-fit: cover; transition: transform 0.5s ease;">
          </div>
        </div>  

        <!-- Carousel controls -->
          <button class="carousel-control-prev" type="button" data-bs-target="#galleryCarousel" data-bs-slide="prev"
            style="position: absolute; top: 50%; transform: translateY(-50%); color: rgba(0, 0, 0, 0.7);">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#galleryCarousel" data-bs-slide="next"
          style="position: absolute; top: 50%; transform: translateY(-50%); color: rgba(0, 0, 0, 0.7);">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>

        <!--Indicators-->
        <div class="carousel-indicators" style="bottom: -40px; display: flex; justify-content: center;">
          <button type="button" data-bs-target="#galleryCarousel" data-bs-slide-to="0" class="active" aria-current="true"
          style="background-color: rgba(0, 0, 0, 0.5); border: none;border-radius: 50%; width: 12px;height: 12px;margin: 0 5px; transition: background-color 0.3s ease;"></button>

          <button type="button" data-bs-target="#galleryCarousel" data-bs-slide-to="1"
          style="background-color: rgba(0, 0, 0, 0.5); border: none;border-radius: 50%; width: 12px;height: 12px;margin: 0 5px; transition: background-color 0.3s ease;"></button>

          <button type="button" data-bs-target="#galleryCarousel" data-bs-slide-to="2"
          style="background-color: rgba(0, 0, 0, 0.5); border: none;border-radius: 50%; width: 12px;height: 12px;margin: 0 5px; transition: background-color 0.3s ease;"></button>
          </div>
        </div>
    </div>
  </div>
</div>  
{% include 'footer.html' %}
{% endblock %}

