{% extends 'navbar.html' %}

{% load bootstrap5 %} <!-- Load the bootstrap5 template tag library -->
{% bootstrap_css %} <!-- Load the Bootstrap CSS img folder -->
{% bootstrap_javascript %} <!-- Load the Bootstrap JavaScript img folder -->
{% bootstrap_messages %} <!--Optional: Display django.contrib.messages as Bootstrap alerts -->
{% load static %} <!--Load files stored in static folder in app folder-->

<head>
  <!-- Link to your custom CSS file -->
  <link rel="stylesheet" href="{% static 'css/custom.css' %}"> 
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  
</head>

{% block content %}


<div class="container"> <!-- Align with the navbar's container -->
  <div class="slider-container">
    <div id="image-comparison-slider">
      <img src="{% static 'imgs/BeforeAfterFordBW.jpg' %}" alt="before">
      <div class="img-wrapper">
        <img src="{% static 'imgs/BeforeAfterFordColor.jpg' %}" alt="after">
      </div>
      <span class="label label-before">Before</span>
      <span class="label label-after">After</span>
      <div class="handle">
        <div class="handle-line"></div>
        <div class="handle-circle">
          <i class="fas fa-chevron-left"></i>
          <i class="fas fa-chevron-right"></i>
        </div>
        <div class="handle-line"></div>
      </div>
    </div>
  </div>
</div>

<script>
/**JS**/
const slider = document.querySelector("#image-comparison-slider");
const sliderImgWrapper = document.querySelector("#image-comparison-slider .img-wrapper");
const sliderHandle = document.querySelector("#image-comparison-slider .handle");

slider.addEventListener("mousemove", sliderMouseMove);
slider.addEventListener("touchmove", sliderMouseMove);

function sliderMouseMove(event) {

if(isSliderLocked) return;

const sliderLeftX = slider.offsetLeft;
const sliderWidth = slider.clientWidth;
const sliderHandleWidth = sliderHandle.clientWidth;

let mouseX = (event.clientX || event.touches[0].clientX) - sliderLeftX;
if(mouseX < 0) mouseX = 0;
else if(mouseX > sliderWidth) mouseX = sliderWidth;

sliderImgWrapper.style.width = `${((1 - mouseX/sliderWidth) * 100).toFixed(4)}%`;
sliderHandle.style.left = `calc(${((mouseX/sliderWidth) * 100).toFixed(4)}% - ${sliderHandleWidth/2}px)`;
}

let isSliderLocked = false;

slider.addEventListener("mousedown", sliderMouseDown);
slider.addEventListener("touchstart", sliderMouseDown);
slider.addEventListener("mouseup", sliderMouseUp);
slider.addEventListener("touchend", sliderMouseUp);
slider.addEventListener("mouseleave", sliderMouseLeave);

function sliderMouseDown(event) {
if(isSliderLocked) isSliderLocked = false;
sliderMouseMove(event);
}

function sliderMouseUp() {
if(!isSliderLocked) isSliderLocked = true;
}

function sliderMouseLeave() {
if(isSliderLocked) isSliderLocked = false;
}
</script>


<div class="container">
  <h1 class="text-center mt-5">Gallery</h1>
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <p class="lead text-center">More Transformations</p>
      <div id="galleryCarousel" class="carousel slide mt-4" data-bs-ride="carousel">
        <!-- Indicators -->
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#galleryCarousel" data-bs-slide-to="0" class="active" aria-current="true"></button>
          <button type="button" data-bs-target="#galleryCarousel" data-bs-slide-to="1"></button>
          <button type="button" data-bs-target="#galleryCarousel" data-bs-slide-to="2"></button>
        </div>

        <!-- Carousel items -->
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="{% static 'imgs/home-tran-bmw.png' %}" class="d-block w-100" alt="Image of a car">
          </div>
          <div class="carousel-item">
            <img src="{% static 'imgs/home-tran-ford.png' %}" class="d-block w-100" alt="Image of a car">
          </div>
          <div class="carousel-item">
            <img src="{% static 'imgs/home-tran-gmc.png' %}" class="d-block w-100" alt="Image of a car">
          </div>
        </div>

        <!-- Carousel controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#galleryCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#galleryCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </div>
</div>
{% include 'footer.html' %}
{% endblock %}

